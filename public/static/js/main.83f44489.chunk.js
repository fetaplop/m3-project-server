(this["webpackJsonpreact-auth-client"]=this["webpackJsonpreact-auth-client"]||[]).push([[0],{31:function(e,t,n){e.exports=n(59)},36:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(29),u=n.n(o),l=n(8),i=n(2),s=n(3),c=n(6),m=n(5),p=(n(36),n(1)),h=n(13),g=n.n(h),d=new(function(){function e(){Object(i.a)(this,e),this.auth=g.a.create({baseURL:"https://oulu-bus-stops.herokuapp.com",withCredentials:!0})}return Object(s.a)(e,[{key:"signup",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/signup",{username:t,password:n}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/login",{username:t,password:n}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.get("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),v=r.a.createContext(),f=v.Consumer,b=v.Provider;function E(e){return function(t){return r.a.createElement(f,null,(function(n){return r.a.createElement(e,Object.assign({},t,{user:n.user,isLoggedIn:n.isLoggedIn,isLoading:n.isLoading,login:n.login,signup:n.signup,logout:n.logout}))}))}}var y=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isLoggedIn:!1,isLoading:!0},e.login=function(t,n){d.login({username:t,password:n}).then((function(t){e.setState({isLoggedIn:!0,isLoading:!1,user:t})})).catch((function(t){console.log(t),e.setState({isLoggedIn:!1,isLoading:!1,user:null})}))},e.signup=function(t,n){d.signup({username:t,password:n}).then((function(t){e.setState({isLoggedIn:!0,isLoading:!1,user:t})})).catch((function(t){console.log(t),e.setState({isLoggedIn:!1,isLoading:!1,user:null})}))},e.logout=function(){d.logout().then((function(){e.setState({isLoggedIn:!1,isLoading:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;d.me().then((function(t){e.setState({isLoggedIn:!0,isLoading:!1,user:t})})).catch((function(t){return e.setState({isLoggedIn:!1,isLoading:!1,user:null})}))}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.isLoggedIn,a=e.isLoading,o=this.login,u=this.signup,l=this.logout;return r.a.createElement(b,{value:{user:t,isLoggedIn:n,isLoading:a,login:o,signup:u,logout:l}},this.props.children)}}]),n}(r.a.Component),O=E(function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.logout,a=e.isLoggedIn;return r.a.createElement("nav",{className:"navbar"},r.a.createElement(l.b,{to:"/",id:"home-btn"},r.a.createElement("h4",null,"Home")),a?r.a.createElement("div",null,r.a.createElement("p",null,t.username),r.a.createElement("button",{onClick:n}," Logout ")):r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/login"}," ",r.a.createElement("button",{className:"navbar-button"},"Login")," "),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/signup"}," ",r.a.createElement("button",{className:"navbar-button"},"Sign Up")," ")))}}]),n}(a.Component)),j=new(function(){function e(){Object(i.a)(this,e),this.stop=g.a.create({baseURL:"https://oulu-bus-stops.herokuapp.com",withCredentials:!0})}return Object(s.a)(e,[{key:"getAll",value:function(){return this.stop.get("/stops").then((function(e){return e.data}))}},{key:"getOne",value:function(e){return this.stop.get("/stops/".concat(e)).then((function(e){return e.data}))}}]),e}()),L=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={stop:{}},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;console.log("id from componentDidMount:",t),j.getOne(t).then((function(t){console.log("stopfromServer inside StopPage compoenntDid*Mount:",t),e.setState({stop:t,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state.stop;return console.log("mystop should be now a stop...",e),r.a.createElement("div",null,r.a.createElement("h1",null,"heya this is ",e.name," page"),r.a.createElement("p",null,"buses servicing this stop: "," "))}}]),n}(a.Component),w=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={data:[],searchFor:""},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;j.getAll().then((function(t){console.log("serverData with stopService getAll me:",t),e.setState({data:t})})).catch((function(e){return console.log("error while getting data from server",e)}))}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",null,r.a.createElement("form",{action:"",method:"get"},r.a.createElement("label",null,"Search: "),r.a.createElement("button",{type:"submit"},"oikeesti t\xe4\xe4 ei ees mitt\xe4\xe4n vaikka submit button onkin")),r.a.createElement("div",null,r.a.createElement("p",null,"trying to display all stops here:"),e.map((function(e){return r.a.createElement("div",{key:e.stopCode},r.a.createElement(l.b,{to:"/".concat(e._id)},r.a.createElement("h4",null,e.name)))}))))}}]),n}(a.Component);var k=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home Page"),r.a.createElement(w,null))},C=n(15),S=E(function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,r=n.password;e.props.signup(a,r)},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(C.a)({},a,r))},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Signup"})),r.a.createElement("p",null,"Already have account?"),r.a.createElement(l.b,{to:"/login"}," Login"))}}]),n}(a.Component)),I=E(function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,r=n.password;e.props.login(a,r)},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(C.a)({},a,r))},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),n}(a.Component)),x=E(function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Private Route"),this.props.isLoggedIn?r.a.createElement("h3",null,"Username: ",this.props.user.username):null)}}]),n}(a.Component));var A=E((function(e){console.log("props :>> ",e);var t=e.exact,n=e.path,a=e.component,o=e.isLoggedIn,u=a;return r.a.createElement(p.b,{exact:t,path:n,render:function(e){return o?r.a.createElement(p.a,{to:"/private"}):o?void 0:r.a.createElement(u,e)}})}));var D=E((function(e){console.log("props :>> ",e);var t=e.exact,n=e.path,a=e.component,o=e.isLoggedIn,u=a;return r.a.createElement(p.b,{exact:t,path:n,render:function(e){return o?r.a.createElement(u,e):o?void 0:r.a.createElement(p.a,{to:"/login"})}})})),U=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(O,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:k}),r.a.createElement(A,{exact:!0,path:"/:id",component:L}),r.a.createElement(A,{exact:!0,path:"/signup",component:S}),r.a.createElement(A,{exact:!0,path:"/login",component:I}),r.a.createElement(D,{exact:!0,path:"/private",component:x})))}}]),n}(a.Component);u.a.render(r.a.createElement(l.a,null,r.a.createElement(y,null,r.a.createElement(U,null))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.83f44489.chunk.js.map